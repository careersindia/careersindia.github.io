<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Careers India - Welcome</title>
    
    <!-- PWA Manifest and Theme Color -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">

    <style>
        /* This is the ONLY style block needed. */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: sans-serif;
            background-color: black;
        }

        #intro-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            z-index: 1; /* Video is in the back */
        }

        #start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 2; /* Overlay is on top */
        }
        
        #start-overlay h1 {
            font-size: 2.5em;
            text-align: center;
        }

        #start-overlay p {
            font-size: 1.2em;
            margin-top: 0;
        }
    </style>
</head>

<body>

    <!-- The video player. No autoplay, no muted. The script will handle it. -->
    <video id="intro-video" playsinline>
        <source src="cube.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- The "Tap to Start" overlay that covers the screen -->
    <div id="start-overlay">
        <h1>Welcome to Careers India</h1>
        <p>Tap anywhere to begin</p>
    </div>

    <!-- The ONE script that controls everything -->
    <script>
        const video = document.getElementById('intro-video');
        const startOverlay = document.getElementById('start-overlay');

        function startExperience() {
            // This is the 'permission' from the user
            startOverlay.style.display = 'none'; // Hide the overlay
            
            // Now we can play with sound
            video.muted = false; 
            const promise = video.play();

            if (promise !== undefined) {
                promise.catch(error => {
                    // Autoplay was prevented. This can happen.
                    // We will just redirect immediately in this case.
                    console.error("Video play failed:", error);
                    loadMainPage();
                });
            }
        }
        
        function loadMainPage() {
            window.location.href = 'mainnow.html';
        }

        // --- Event Listeners ---
        // 1. When the user taps the overlay, start the experience
        startOverlay.addEventListener('click', startExperience);

        // 2. When the video finishes playing, go to the main page
        video.addEventListener('ended', loadMainPage);
        
        // 3. Register the service worker for the PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
              .then(reg => console.log('Service worker registered'))
              .catch(err => console.log('Service worker registration failed', err));
        }
    </script>

</body>
</html>